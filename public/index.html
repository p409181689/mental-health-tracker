<!DOCTYPE html>
<html>
<head>
	<title>Mental Healthier</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type='text/javascript' src='config.js'></script>
	<script src="script.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
  <script src="/__/firebase/4.0.0/firebase-app.js"></script>
    <script src="/__/firebase/4.0.0/firebase-auth.js"></script>
    <script src="/__/firebase/4.0.0/firebase-database.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: key,
    authDomain: "mental-healthier.firebaseapp.com",
    databaseURL: database,
    projectId: "mental-healthier",
    storageBucket: storageBucket,
    messagingSenderId: "778809643853"
  };
  firebase.initializeApp(config);
  var ref = firebase.database().ref("mental-healthier/");
</script>
<script type="text/javascript">
      //Handles the sign in button press.
      function toggleSignIn() {
        if (firebase.auth().currentUser) {
          // [START signout]
          firebase.auth().signOut();
          // [END signout]
        } else {
          var email = document.getElementById('email').value;
          var password = document.getElementById('password').value;
          if (email.length < 4) {
            alert('Please enter an email address.');
            return;
          }
          if (password.length < 4) {
            alert('Please enter a password.');
            return;
          }
          // Sign in with email and pass.
          // [START authwithemail]
          firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // [START_EXCLUDE]
            if (errorCode === 'auth/wrong-password') {
              alert('Wrong password.');
            } else {
              alert(errorMessage);
            }
            console.log(error);
            document.getElementById('quickstart-sign-in').disabled = false;
            // [END_EXCLUDE]
          });
        // [END authwithemail]
        }
        document.getElementById('quickstart-sign-in').disabled = true;   
      }
      function initApp() {
        // Listening for auth state changes.
        // [START authstatelistener]
        firebase.auth().onAuthStateChanged(function(user) {
          // [START_EXCLUDE silent]
          document.getElementById('quickstart-verify-email').disabled = true;
          // [END_EXCLUDE]
          if (user) {
            // User is signed in.
            var displayName = user.displayName;
            var email = user.email;
            var emailVerified = user.emailVerified;
            var photoURL = user.photoURL;
            var isAnonymous = user.isAnonymous;
            var uid = user.uid;
            var providerData = user.providerData;
            // [START_EXCLUDE]
            document.getElementById('quickstart-sign-in-status').textContent = 'Signed in';
            document.getElementById('quickstart-sign-in').textContent = 'Sign out';
            window.location = 'timestamp.html';
            //document.getElementById('quickstart-account-details').textContent = JSON.stringify(user, null, '  ');
            // if (!emailVerified) {
            //   document.getElementById('quickstart-verify-email').disabled = false;
            // }

             document.getElementById('member-content').textContent = 'Member Only Statement!';
             document.getElementById('quickstart-sign-in2').disabled = true;
            //document.getElementById('quickstart-account-details').textContent = JSON.stringify(user, null, '  ');
            if (!emailVerified) {
              document.getElementById('quickstart-verify-email').disabled = false;
            }
            // [END_EXCLUDE]
          } else {
            // User is signed out.
            // [START_EXCLUDE]
            document.getElementById('quickstart-sign-in-status').textContent = 'Signed out';
            document.getElementById('quickstart-sign-in').textContent = 'Sign in';
            
            // [END_EXCLUDE]
          }
          // [START_EXCLUDE silent]
          document.getElementById('quickstart-sign-in').disabled = false;
          // [END_EXCLUDE]
        });
        // [END authstatelistener]
        document.getElementById('quickstart-sign-in').addEventListener('click', toggleSignIn, false);
        
      }
      window.onload = function() {
        initApp();
      };
</script>      
</head>
<body id="main-body">
	<div >
	<h1> Mental Healthier</h1>
	</div>
	<div class="mainbox">
	<p>Want to get a better picture of your emotional health? <br> Mental Healthier allows you to track your emotions - negative and positive - and your triggers to give you a better picture of what works and doesn't for you. </p>
	<h2>Sign In</h2>
	
      
      <input style="display:inline;width:auto;" type="text" id="email" name="email" placeholder="Email"/>
      &nbsp;&nbsp;&nbsp;
      <input  style="display:inline;width:auto;" type="password" id="password" name="password" placeholder="Password"/>
      <br/><br/>
      <button id="quickstart-sign-in" name="signin">Sign In</button>
      <button class="mdl-button mdl-js-button mdl-button--raised" disabled id="quickstart-verify-email" name="verify-email">Send Email Verification</button>
      
      <p>Firebase sign-in status: <span id="quickstart-sign-in-status">Unknown</span>
      <pre><code id="quickstart-account-details"></code></pre></p>
    
	</div>
	<div>
	<p id="login-alert"></p>
	
	</div>
	
	<div id="suicide-prevention" class="mainbox">
		<p>If you are in crisis, please call the <a href="https://afsp.org/" alt="link to suicide prevention website"> National Suicide Prevention Lifeline </a> at 1-800-273-TALK (8255) or contact the Crisis Text Line by texting TALK to 741-741.
		</p>
	</div>
	
</body>
</html>